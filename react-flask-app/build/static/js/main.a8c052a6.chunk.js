(this["webpackJsonpreact-flask-app"]=this["webpackJsonpreact-flask-app"]||[]).push([[0],{150:function(e,t,n){"use strict";n.r(t);var c=n(9),s=n.n(c),o=n(58),a=n.n(o),r=(n(77),n(13)),i=(n(78),n(15)),l=n(8),u=function(e){var t=e.notEntered,n=e.setnotEntered,s=Object(c.useState)(""),o=Object(r.a)(s,2),a=o[0],i=o[1],u=Object(c.useState)(""),j=Object(r.a)(u,2),d=j[0],b=j[1],h=Object(c.useState)(""),O=Object(r.a)(h,2),p=O[0],g=O[1],f=Object(c.useState)(!1),m=Object(r.a)(f,2),x=m[0],v=m[1],S=Object(c.useState)(!1),k=Object(r.a)(S,2),y=k[0],N=k[1],C=function(e){e.preventDefault(),N(!y)};return Object(l.jsx)("div",{className:"cred-container",children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(a,d,p,x);var c={name:a,email:d,password:p};fetch("".concat("http://localhost:5000","/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){return console.log(e)})),n(!t)},children:[Object(l.jsx)("div",{className:"form-control",children:Object(l.jsx)("input",{type:"text",placeholder:"Name",value:a,onChange:function(e){return i(e.target.value)}})}),Object(l.jsx)("div",{className:"form-control",children:Object(l.jsx)("input",{type:"text",placeholder:"Email",value:d,onChange:function(e){return b(e.target.value)}})}),Object(l.jsxs)("div",{className:"form-control",children:[Object(l.jsx)("input",{type:y?"text":"password",placeholder:"Password",value:p,onChange:function(e){return g(e.target.value)}}),y?Object(l.jsx)("button",{className:"show-password-btn",onClick:C,style:{background:"url('https://img.icons8.com/material-outlined/24/000000/closed-eye.png')"}}):Object(l.jsx)("button",{className:"show-password-btn",onClick:C,style:{background:"url('https://img.icons8.com/material-outlined/24/000000/visible--v2.png')"}})]}),Object(l.jsxs)("div",{className:"form-control-check",children:[Object(l.jsx)("input",{type:"checkbox",checked:x,value:x,onChange:function(e){return v(e.currentTarget.checked)}}),Object(l.jsx)("label",{children:"Remember me"})]}),Object(l.jsx)("input",{type:"submit",value:"Sign up",className:"btn btn-block"})]})})},j=n(34),d=n(16),b=n.n(d),h=n(26),O=function(e){var t=e.getStore,n=e.getActions,c=e.setStore;return{store:{token:null,message:null,demo:[{title:"FIRST",background:"white",initial:"white"},{title:"SECOND",background:"white",initial:"white"}]},actions:{exampleFunction:function(){n().changeColor(0,"green")},syncTokenFromSessionStore:function(){var e=sessionStorage.getItem("token");console.log("App just loaded, syncing local sessionstorage"),e&&""!=e&&void 0!=e&&c({token:e})},logout:function(){sessionStorage.removeItem("token"),console.log("Log out"),c({token:null})},login:function(){var e=Object(h.a)(b.a.mark((function e(t,n){var s,o,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})},e.prev=1,e.next=4,fetch("".concat("http://localhost:5000","/signin"),s);case 4:if(200===(o=e.sent).status){e.next=8;break}return alert("Incorrect Email or Password"),e.abrupt("return",!1);case 8:return e.next=10,o.json();case 10:return a=e.sent,console.log("this came from the backend",a),sessionStorage.setItem("token",a.access_token),c({token:a.access_token}),e.abrupt("return",!0);case 17:e.prev=17,e.t0=e.catch(1),console.error("ERROR login in");case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,n){return e.apply(this,arguments)}}(),getGraph:function(){var e=Object(h.a)(b.a.mark((function e(n,c,s){var o,a,r,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t(),a={headers:{Authorization:"Bearer "+o.token}},e.prev=2,e.next=5,fetch("".concat("http://localhost:5000","/mainpage/session"),a);case 5:if(200===(r=e.sent).status){e.next=9;break}return alert("Error, no email found in the database"),e.abrupt("return",!1);case 9:return e.next=11,r.json();case 11:return i=e.sent,console.log("this came from the graph",i),n(i.nodes),s(i.links),c(i.user),e.abrupt("return",!0);case 19:e.prev=19,e.t0=e.catch(2),console.error("ERROR get graph");case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t,n,c){return e.apply(this,arguments)}}(),getMessage:function(){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_TEST:"http://localhost:5000"}).BACKEND_URL+"/api/hello").then((function(e){return e.json()})).then((function(e){return c({message:e.message})})).catch((function(e){return console.log("Error loading message from backend",e)}))},changeColor:function(e,n){var s=t().demo.map((function(t,c){return c===e&&(t.background=n),t}));c({demo:s})}}}},p=s.a.createContext(null),g=function(e){return function(t){var n=Object(c.useState)(O({getStore:function(){return o.store},getActions:function(){return o.actions},setStore:function(e){return a({store:Object.assign(o.store,e),actions:Object(j.a)({},o.actions)})}})),s=Object(r.a)(n,2),o=s[0],a=s[1];return Object(c.useEffect)((function(){o.actions.syncTokenFromSessionStore()}),[]),Object(l.jsx)(p.Provider,{value:o,children:Object(l.jsx)(e,Object(j.a)({},t))})}},f=function(e){e.signIn;var t=e.setSignIn,n=Object(c.useContext)(p),s=n.store,o=n.actions,a=Object(c.useState)(""),u=Object(r.a)(a,2),j=u[0],d=u[1],b=Object(c.useState)(""),h=Object(r.a)(b,2),O=h[0],g=h[1],f=Object(c.useState)(!1),m=Object(r.a)(f,2),x=m[0],v=m[1],S=Object(c.useState)(!1),k=Object(r.a)(S,2),y=k[0],N=k[1],C=(sessionStorage.token,Object(i.g)()),w=function(e){e.preventDefault(),N(!y)};return s.token&&""!=s.token&&void 0!=s.token&&C.push("/mainpage"),Object(l.jsx)("div",{children:s.token&&""!=s.token&&void 0!=s.token?Object(l.jsx)(i.a,{to:"/mainpage"}):Object(l.jsxs)("div",{className:"signup-header",children:[Object(l.jsx)("script",{src:"https://kit.fontawesome.com/a076d05399.js",crossorigin:"anonymous"}),Object(l.jsx)("h1",{children:"Log in"}),Object(l.jsx)("div",{className:"cred-container",children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o.login(j,O).then((function(){t(!0)}))},children:[Object(l.jsx)("div",{className:"form-control",children:Object(l.jsx)("input",{type:"text",placeholder:"Email",value:j,onChange:function(e){return d(e.target.value)}})}),Object(l.jsxs)("div",{className:"form-control",children:[Object(l.jsx)("input",{type:y?"text":"password",placeholder:"Password",value:O,onChange:function(e){return g(e.target.value)}}),y?Object(l.jsx)("button",{className:"show-password-btn",onClick:w,style:{background:"url('https://img.icons8.com/material-outlined/24/000000/closed-eye.png')"}}):Object(l.jsx)("button",{className:"show-password-btn",onClick:w,style:{background:"url('https://img.icons8.com/material-outlined/24/000000/visible--v2.png')"}})]}),Object(l.jsxs)("div",{className:"form-control-check",children:[Object(l.jsx)("input",{type:"checkbox",checked:x,value:x,onChange:function(e){return v(e.currentTarget.checked)}}),Object(l.jsx)("label",{children:"Remember me"})]}),Object(l.jsx)("input",{type:"submit",value:"Sign in",className:"btn btn-block"})]})})]})})},m=function(e){e.onAdd;var t=e.setSignIn,n=Object(c.useState)(""),s=Object(r.a)(n,2),o=s[0],a=s[1],i=Object(c.useState)(""),u=Object(r.a)(i,2),j=u[0],d=u[1],b=Object(c.useState)(""),h=Object(r.a)(b,2),O=h[0],p=h[1],g=Object(c.useState)(""),f=Object(r.a)(g,2),m=f[0],x=f[1];return Object(l.jsxs)("form",{className:"add-friend-container",onSubmit:function(e){e.preventDefault();var n={friendName1:o,friendName2:j,friendName3:O,friendName4:m};console.log(n),fetch("".concat("http://localhost:5000","/addfriend"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){e.json(),t(!0)})).then((function(e){return console.log(e)}))},children:[Object(l.jsxs)("div",{className:"add-friend-form",children:[Object(l.jsx)("label",{children:"1."}),Object(l.jsx)("input",{type:"text",placeholder:"Add Friend",value:o,onChange:function(e){return a(e.target.value)}})]}),Object(l.jsxs)("div",{className:"add-friend-form",children:[Object(l.jsx)("label",{children:"2."}),Object(l.jsx)("input",{type:"text",placeholder:"Add Friend",value:j,onChange:function(e){return d(e.target.value)}})]}),Object(l.jsxs)("div",{className:"add-friend-form",children:[Object(l.jsx)("label",{children:"3."}),Object(l.jsx)("input",{type:"text",placeholder:"Add Friend",value:O,onChange:function(e){return p(e.target.value)}})]}),Object(l.jsxs)("div",{className:"add-friend-form",children:[Object(l.jsx)("label",{children:"4."}),Object(l.jsx)("input",{type:"text",placeholder:"Add Friend",value:m,onChange:function(e){return x(e.target.value)}})]}),Object(l.jsx)("input",{type:"submit",value:"Continue",className:"btn btn-block"})]})},x=function(e){console.log(e)},v=function(e){var t=e.signIn,n=e.setSignIn,s=Object(c.useState)(!0),o=Object(r.a)(s,2),a=o[0],i=o[1],j=Object(c.useState)(!1),d=Object(r.a)(j,2),b=d[0],h=d[1];return Object(l.jsx)("div",{className:"login-container",children:a?b?Object(l.jsx)(f,{signIn:t,setSignIn:n}):Object(l.jsxs)("div",{className:"signup-header",children:[Object(l.jsx)("h1",{children:"Create account"}),Object(l.jsx)("h2",{children:"Already have an account? "})," ",Object(l.jsx)("h2",{className:"link",onClick:function(){h(!0)},style:{cursor:"pointer"},children:"Sign in"}),Object(l.jsx)(u,{notEntered:a,setnotEntered:i})]}):Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{className:"add-friends-header",children:"Add a maximum of 4 people to your Covid-19 social bubble"}),Object(l.jsx)(m,{onAdd:x,setSignIn:n})]})})},S=function(e){var t=e.signIn,n=e.setSignIn;return t?Object(l.jsx)(i.a,{to:"/mainpage"}):Object(l.jsx)("div",{children:Object(l.jsx)("div",{className:"loginBox",children:Object(l.jsx)(v,{signIn:t,setSignIn:n})})})},k=n(66),y=function(e){var t=e.setSignIn,n=e.signIn,s=Object(c.useContext)(p),o=s.store,a=s.actions,u=Object(c.useState)([]),j=Object(r.a)(u,2),d=j[0],b=j[1],h=Object(c.useState)([]),O=Object(r.a)(h,2),g=O[0],f=O[1],m=Object(c.useState)([]),x=Object(r.a)(m,2),v=x[0],S=x[1],y=Object(c.useState)(!1),N=Object(r.a)(y,2),C=N[0],w=N[1],I=Object(c.useState)(!1),E=Object(r.a)(I,2);E[0],E[1],Object(i.g)();return Object(c.useEffect)((function(){n&&a.getGraph(b,S,f).then((function(){w(!0)}))}),[]),Object(l.jsx)("div",{children:o.token?C?Object(l.jsxs)("div",{children:[Object(l.jsxs)("h1",{style:{textAlign:"center"},children:[v,"'s Social Bubble"]}),Object(l.jsx)(k.a,{graphData:{nodes:d,links:g},nodeId:"id"}),Object(l.jsx)("button",{onClick:function(){a.logout(),t(!1),i.a},children:" Sign Out "})]}):Object(l.jsx)("div",{children:Object(l.jsx)("h1",{style:{textAlign:"center"},children:"Loading..."})}):Object(l.jsx)(i.a,{to:"/"})})},N=n(27);var C=g((function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],s=t[1];return Object(l.jsx)(N.a,{children:Object(l.jsx)("div",{className:"container",children:Object(l.jsx)("div",{className:"content-wrapper",children:Object(l.jsxs)(i.d,{children:[Object(l.jsx)(i.b,{exact:!0,path:"/",component:function(){return Object(l.jsx)(S,{signIn:n,setSignIn:s})}}),Object(l.jsx)(i.b,{exact:!0,path:"/mainpage",component:function(){return Object(l.jsx)(y,{setSignIn:s,signIn:n})}})]})})})})})),w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,165)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),o(e),a(e)}))};a.a.render(Object(l.jsx)(C,{}),document.getElementById("root")),w()},77:function(e,t,n){},78:function(e,t,n){}},[[150,1,2]]]);
//# sourceMappingURL=main.a8c052a6.chunk.js.map