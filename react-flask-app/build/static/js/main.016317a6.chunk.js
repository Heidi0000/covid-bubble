(this["webpackJsonpreact-flask-app"]=this["webpackJsonpreact-flask-app"]||[]).push([[0],{150:function(e,t,n){"use strict";n.r(t);var c=n(8),r=n.n(c),s=n(58),o=n.n(s),a=(n(77),n(12)),i=(n(78),n(15)),l=n(34),u=n(16),d=n.n(u),j=n(24),b=function(e){var t=e.getStore,n=e.getActions,c=e.setStore;return console.log("IN GETSTAE"),{store:{token:null,message:null,demo:[{title:"FIRST",background:"white",initial:"white"},{title:"SECOND",background:"white",initial:"white"}]},actions:{exampleFunction:function(){n().changeColor(0,"green")},syncTokenFromSessionStore:function(){var e=sessionStorage.getItem("token");console.log("App just loaded, syncing local sessionstorage"),e&&""!=e&&void 0!=e&&c({token:e})},logout:function(){sessionStorage.removeItem("token"),console.log("Log out"),c({token:null})},login:function(){var e=Object(j.a)(d.a.mark((function e(t,n){var r,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})},e.prev=1,e.next=4,fetch("".concat("http://localhost:5000","/signin"),r);case 4:if(200===(s=e.sent).status){e.next=8;break}return alert("Incorrect Email or Password"),e.abrupt("return",!1);case 8:return e.next=10,s.json();case 10:return o=e.sent,console.log("this came from the backend",o),sessionStorage.setItem("token",o.access_token),c({token:o.access_token}),e.abrupt("return",!0);case 17:e.prev=17,e.t0=e.catch(1),console.error("ERROR login in");case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,n){return e.apply(this,arguments)}}(),signup:function(){var e=Object(j.a)(d.a.mark((function e(t,n,r){var s,o,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,email:n,password:r})},e.next=3,fetch("".concat("http://localhost:5000","/signup"),s);case 3:if(200===(o=e.sent).status){e.next=7;break}return alert("Incorrect Email or Password"),e.abrupt("return",!1);case 7:return e.next=9,o.json();case 9:return a=e.sent,console.log(a),sessionStorage.setItem("token",a.token),c({token:a.token}),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),getIsUserAddedByFriends:function(){var e=Object(j.a)(d.a.mark((function e(n,c,r,s,o,a,i,l,u){var j,b,h,O,p,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("IN GET IS USER ADDED"),j=t(),b={headers:{Authorization:"Bearer "+j.token}},e.prev=3,e.next=6,fetch("".concat("http://localhost:5000","/loadAddFriend"),b);case 6:if(200===(h=e.sent).status){e.next=10;break}return alert("idk what this error would be"),e.abrupt("return",!1);case 10:return e.next=12,h.json();case 12:for(O=e.sent,console.log(O),p=O.emails,n(O.emails),f=0;f<p.length;f++)0==f&&(console.log("11111"),c(p[0]),r(!0)),1==f&&(console.log("22222"),s(p[1]),o(!0)),2==f&&(console.log("33333"),a(p[2]),i(!0)),3==f&&(console.log("44444"),l(p[3]),u(!0));return e.abrupt("return",!0);case 20:e.prev=20,e.t0=e.catch(3),console.error("ERROR get is user added by friends in flux");case 23:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(t,n,c,r,s,o,a,i,l){return e.apply(this,arguments)}}(),addFriendsToDB:function(){var e=Object(j.a)(d.a.mark((function e(n){var c,r,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t(),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.token},body:JSON.stringify(n)},e.prev=2,e.next=5,fetch("".concat("http://localhost:5000","/addfriend"),r);case 5:if(200===(s=e.sent).status){e.next=9;break}return alert("idk what this error would be in add friends to db"),e.abrupt("return",!1);case 9:return e.next=11,s.json();case 11:return o=e.sent,console.log(o),e.abrupt("return",!0);case 16:e.prev=16,e.t0=e.catch(2),console.error("ERROR add friends to db in flux");case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}(),getGraph:function(){var e=Object(j.a)(d.a.mark((function e(n,c,r){var s,o,a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("IN GET GRAPH?"),s=t(),o={headers:{Authorization:"Bearer "+s.token}},e.prev=3,e.next=6,fetch("".concat("http://localhost:5000","/mainpage/session"),o);case 6:if(200===(a=e.sent).status){e.next=10;break}return alert("Error, no email found in the database"),e.abrupt("return",!1);case 10:return e.next=12,a.json();case 12:return i=e.sent,console.log("this came from the graph",i),n(i.nodes),r(i.links),c(i.user),e.abrupt("return",!0);case 20:e.prev=20,e.t0=e.catch(3),console.error("ERROR get graph");case 23:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(t,n,c){return e.apply(this,arguments)}}(),getMessage:function(){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_TEST:"http://localhost:5000"}).BACKEND_URL+"/api/hello").then((function(e){return e.json()})).then((function(e){return c({message:e.message})})).catch((function(e){return console.log("Error loading message from backend",e)}))},changeColor:function(e,n){console.log("IN CHANGE OCLR?");var r=t().demo.map((function(t,c){return c===e&&(t.background=n),t}));c({demo:r})}}}},h=n(9),O=r.a.createContext(null),p=function(e){return function(t){var n=Object(c.useState)(b({getStore:function(){return s.store},getActions:function(){return s.actions},setStore:function(e){return o({store:Object.assign(s.store,e),actions:Object(l.a)({},s.actions)})}})),r=Object(a.a)(n,2),s=r[0],o=r[1];return Object(c.useEffect)((function(){s.actions.syncTokenFromSessionStore()}),[]),Object(h.jsx)(O.Provider,{value:s,children:Object(h.jsx)(e,Object(l.a)({},t))})}},f=function(e){e.notEntered;var t=e.setnotEntered,n=Object(c.useState)(""),r=Object(a.a)(n,2),s=r[0],o=r[1],i=Object(c.useState)(""),l=Object(a.a)(i,2),u=l[0],d=l[1],j=Object(c.useState)(""),b=Object(a.a)(j,2),p=b[0],f=b[1],g=Object(c.useState)(!1),x=Object(a.a)(g,2),m=x[0],v=x[1],S=Object(c.useState)(!1),k=Object(a.a)(S,2),y=k[0],N=k[1],C=Object(c.useContext)(O),E=(C.store,C.actions),w=(sessionStorage.token,function(e){e.preventDefault(),N(!y)});return Object(h.jsx)("div",{className:"cred-container",children:Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(s,u,p,m),E.signup(s,u,p).then((function(){console.log("SETING NOTENTERED TO FALSE"),t(!1)}))},children:[Object(h.jsx)("div",{className:"form-control",children:Object(h.jsx)("input",{type:"text",placeholder:"Name",value:s,onChange:function(e){return o(e.target.value)}})}),Object(h.jsx)("div",{className:"form-control",children:Object(h.jsx)("input",{type:"text",placeholder:"Email",value:u,onChange:function(e){return d(e.target.value)}})}),Object(h.jsxs)("div",{className:"form-control",children:[Object(h.jsx)("input",{type:y?"text":"password",placeholder:"Password",value:p,onChange:function(e){return f(e.target.value)}}),y?Object(h.jsx)("button",{className:"show-password-btn",onClick:w,style:{background:"url('https://img.icons8.com/material-outlined/24/000000/closed-eye.png')"}}):Object(h.jsx)("button",{className:"show-password-btn",onClick:w,style:{background:"url('https://img.icons8.com/material-outlined/24/000000/visible--v2.png')"}})]}),Object(h.jsxs)("div",{className:"form-control-check",children:[Object(h.jsx)("input",{type:"checkbox",checked:m,value:m,onChange:function(e){return v(e.currentTarget.checked)}}),Object(h.jsx)("label",{children:"Remember me"})]}),Object(h.jsx)("input",{type:"submit",value:"Sign up",className:"btn btn-block"})]})})},g=function(e){e.signIn;var t=e.setSignIn,n=Object(c.useContext)(O),r=n.store,s=n.actions,o=Object(c.useState)(""),l=Object(a.a)(o,2),u=l[0],d=l[1],j=Object(c.useState)(""),b=Object(a.a)(j,2),p=b[0],f=b[1],g=Object(c.useState)(!1),x=Object(a.a)(g,2),m=x[0],v=x[1],S=Object(c.useState)(!1),k=Object(a.a)(S,2),y=k[0],N=k[1],C=(sessionStorage.token,Object(i.g)()),E=function(e){e.preventDefault(),N(!y)};return r.token&&""!=r.token&&void 0!=r.token&&C.push("/mainpage"),Object(h.jsx)("div",{children:r.token&&""!=r.token&&void 0!=r.token?Object(h.jsx)(i.a,{to:"/mainpage"}):Object(h.jsxs)("div",{className:"signup-header",children:[Object(h.jsx)("script",{src:"https://kit.fontawesome.com/a076d05399.js",crossorigin:"anonymous"}),Object(h.jsx)("h1",{children:"Log in"}),Object(h.jsx)("div",{className:"cred-container",children:Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s.login(u,p).then((function(){t(!0)}))},children:[Object(h.jsx)("div",{className:"form-control",children:Object(h.jsx)("input",{type:"text",placeholder:"Email",value:u,onChange:function(e){return d(e.target.value)}})}),Object(h.jsxs)("div",{className:"form-control",children:[Object(h.jsx)("input",{type:y?"text":"password",placeholder:"Password",value:p,onChange:function(e){return f(e.target.value)}}),y?Object(h.jsx)("button",{className:"show-password-btn",onClick:E,style:{background:"url('https://img.icons8.com/material-outlined/24/000000/closed-eye.png')"}}):Object(h.jsx)("button",{className:"show-password-btn",onClick:E,style:{background:"url('https://img.icons8.com/material-outlined/24/000000/visible--v2.png')"}})]}),Object(h.jsxs)("div",{className:"form-control-check",children:[Object(h.jsx)("input",{type:"checkbox",checked:m,value:m,onChange:function(e){return v(e.currentTarget.checked)}}),Object(h.jsx)("label",{children:"Remember me"})]}),Object(h.jsx)("input",{type:"submit",value:"Sign in",className:"btn btn-block"})]})})]})})},x=function(e){e.onAdd;var t=e.setSignIn,n=Object(c.useState)(""),r=Object(a.a)(n,2),s=r[0],o=r[1],i=Object(c.useState)(""),l=Object(a.a)(i,2),u=l[0],d=l[1],j=Object(c.useState)(""),b=Object(a.a)(j,2),p=b[0],f=b[1],g=Object(c.useState)(""),x=Object(a.a)(g,2),m=x[0],v=x[1],S=Object(c.useContext)(O),k=(S.store,S.actions),y=Object(c.useState)(!1),N=Object(a.a)(y,2),C=N[0],E=N[1],w=Object(c.useState)(!1),I=Object(a.a)(w,2),T=I[0],A=I[1],R=Object(c.useState)(!1),F=Object(a.a)(R,2),D=F[0],P=F[1],_=Object(c.useState)(!1),B=Object(a.a)(_,2),L=B[0],G=B[1],U=Object(c.useState)([]),H=Object(a.a)(U,2),J=H[0],K=H[1];Object(c.useEffect)((function(){k.getIsUserAddedByFriends(K,o,E,d,A,f,P,v,G).then((function(){console.log("yay"),console.log("here is my email array",J)})),console.log("^^in addfriend, list of friends pls")}),[]);return Object(h.jsxs)("form",{className:"add-friend-container",onSubmit:function(e){e.preventDefault();var n={friendName1:s,friendName2:u,friendName3:p,friendName4:m};console.log(n);var c=k.addFriendsToDB(n);t(c)},children:[Object(h.jsxs)("div",{className:"add-friend-form",children:[Object(h.jsx)("label",{children:"1."}),C?Object(h.jsx)("input",{type:"text",placeholder:"friri",value:s}):Object(h.jsx)("input",{type:"text",placeholder:"Add Friend",value:s,onChange:function(e){return o(e.target.value)}})]}),Object(h.jsxs)("div",{className:"add-friend-form",children:[Object(h.jsx)("label",{children:"2."}),T?Object(h.jsx)("input",{type:"text",placeholder:"friri",value:u}):Object(h.jsx)("input",{type:"text",placeholder:"Add Friend",value:u,onChange:function(e){return d(e.target.value)}})]}),Object(h.jsxs)("div",{className:"add-friend-form",children:[Object(h.jsx)("label",{children:"3."}),D?Object(h.jsx)("input",{type:"text",placeholder:"friri",value:p}):Object(h.jsx)("input",{type:"text",placeholder:"Add Friend",value:p,onChange:function(e){return f(e.target.value)}})]}),Object(h.jsxs)("div",{className:"add-friend-form",children:[Object(h.jsx)("label",{children:"4."}),L?Object(h.jsx)("input",{type:"text",placeholder:"friri",value:m}):Object(h.jsx)("input",{type:"text",placeholder:"Add Friend",value:m,onChange:function(e){return v(e.target.value)}})]}),Object(h.jsx)("input",{type:"submit",value:"Continue",className:"btn btn-block"})]})},m=function(e){console.log(e)},v=function(e){var t=e.signIn,n=e.setSignIn,r=Object(c.useState)(!0),s=Object(a.a)(r,2),o=s[0],i=s[1],l=Object(c.useState)(!1),u=Object(a.a)(l,2),d=u[0],j=u[1],b=Object(c.useContext)(O),p=b.store;b.actions;return console.log("does it at least comehere"),Object(h.jsx)("div",{className:"login-container",children:p.token?Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{className:"add-friends-header",children:"Add a maximum of 4 people to your Covid-19 social bubble"}),Object(h.jsx)(x,{onAdd:m,setSignIn:n})]}):d?Object(h.jsx)(g,{signIn:t,setSignIn:n}):Object(h.jsxs)("div",{className:"signup-header",children:[Object(h.jsx)("h1",{children:"Create account"}),Object(h.jsx)("h2",{children:"Already have an account? "})," ",Object(h.jsx)("h2",{className:"link",onClick:function(){j(!0)},style:{cursor:"pointer"},children:"Sign in"}),Object(h.jsx)(f,{notEntered:o,setnotEntered:i})]})})},S=function(e){var t=e.signIn,n=e.setSignIn;return t?Object(h.jsx)(i.a,{to:"/mainpage"}):Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"loginBox",children:Object(h.jsx)(v,{signIn:t,setSignIn:n})})})},k=n(66),y=function(e){var t=e.setSignIn,n=e.signIn,r=Object(c.useContext)(O),s=r.store,o=r.actions,l=Object(c.useState)([]),u=Object(a.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)([]),p=Object(a.a)(b,2),f=p[0],g=p[1],x=Object(c.useState)([]),m=Object(a.a)(x,2),v=m[0],S=m[1],y=Object(c.useState)(!1),N=Object(a.a)(y,2),C=N[0],E=N[1],w=Object(c.useState)(!1),I=Object(a.a)(w,2);I[0],I[1],Object(i.g)();return Object(c.useEffect)((function(){n&&o.getGraph(j,S,g).then((function(){E(!0)}))}),[]),Object(h.jsx)("div",{children:s.token?C?Object(h.jsxs)("div",{children:[Object(h.jsxs)("h1",{style:{textAlign:"center"},children:[v,"'s Social Bubble"]}),Object(h.jsx)(k.a,{graphData:{nodes:d,links:f},nodeId:"id"}),Object(h.jsx)("button",{onClick:function(){o.logout(),t(!1),i.a},children:" Sign Out "})]}):Object(h.jsx)("div",{children:Object(h.jsx)("h1",{style:{textAlign:"center"},children:"Loading..."})}):Object(h.jsx)(i.a,{to:"/"})})},N=n(27);var C=p((function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),n=t[0],r=t[1];return Object(h.jsx)(N.a,{children:Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"content-wrapper",children:Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{exact:!0,path:"/",component:function(){return Object(h.jsx)(S,{signIn:n,setSignIn:r})}}),Object(h.jsx)(i.b,{exact:!0,path:"/mainpage",component:function(){return Object(h.jsx)(y,{setSignIn:r,signIn:n})}})]})})})})})),E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,165)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),s(e),o(e)}))};o.a.render(Object(h.jsx)(C,{}),document.getElementById("root")),E()},77:function(e,t,n){},78:function(e,t,n){}},[[150,1,2]]]);
//# sourceMappingURL=main.016317a6.chunk.js.map