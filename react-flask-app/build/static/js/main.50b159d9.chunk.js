(this["webpackJsonpreact-flask-app"]=this["webpackJsonpreact-flask-app"]||[]).push([[0],{150:function(e,t,n){"use strict";n.r(t);var c=n(8),o=n.n(c),s=n(58),a=n.n(s),r=(n(77),n(13)),i=(n(78),n(15)),u=n(34),l=n(16),j=n.n(l),b=n(26),d=function(e){var t=e.getStore,n=e.getActions,c=e.setStore;return{store:{token:null,message:null,demo:[{title:"FIRST",background:"white",initial:"white"},{title:"SECOND",background:"white",initial:"white"}]},actions:{exampleFunction:function(){n().changeColor(0,"green")},syncTokenFromSessionStore:function(){var e=sessionStorage.getItem("token");console.log("App just loaded, syncing local sessionstorage"),e&&""!=e&&void 0!=e&&c({token:e})},logout:function(){sessionStorage.removeItem("token"),console.log("Log out"),c({token:null})},login:function(){var e=Object(b.a)(j.a.mark((function e(t,n){var o,s,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})},e.prev=1,e.next=4,fetch("".concat("http://localhost:5000","/signin"),o);case 4:if(200===(s=e.sent).status){e.next=8;break}return alert("Incorrect Email or Password"),e.abrupt("return",!1);case 8:return e.next=10,s.json();case 10:return a=e.sent,console.log("this came from the backend",a),sessionStorage.setItem("token",a.access_token),c({token:a.access_token}),e.abrupt("return",!0);case 17:e.prev=17,e.t0=e.catch(1),console.error("ERROR login in");case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,n){return e.apply(this,arguments)}}(),signup:function(){var e=Object(b.a)(j.a.mark((function e(t,n,o){var s,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,email:n,password:o})},e.next=3,fetch("".concat("http://localhost:5000","/signup"),s);case 3:if(200===(a=e.sent).status){e.next=7;break}return alert("Incorrect Email or Password"),e.abrupt("return",!1);case 7:return e.next=9,a.json();case 9:return r=e.sent,console.log(r),sessionStorage.setItem("token",r.token),c({token:r.token}),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),getGraph:function(){var e=Object(b.a)(j.a.mark((function e(n,c,o){var s,a,r,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t(),a={headers:{Authorization:"Bearer "+s.token}},e.prev=2,e.next=5,fetch("".concat("http://localhost:5000","/mainpage/session"),a);case 5:if(200===(r=e.sent).status){e.next=9;break}return alert("Error, no email found in the database"),e.abrupt("return",!1);case 9:return e.next=11,r.json();case 11:return i=e.sent,console.log("this came from the graph",i),n(i.nodes),o(i.links),c(i.user),e.abrupt("return",!0);case 19:e.prev=19,e.t0=e.catch(2),console.error("ERROR get graph");case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t,n,c){return e.apply(this,arguments)}}(),getMessage:function(){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_TEST:"http://localhost:5000"}).BACKEND_URL+"/api/hello").then((function(e){return e.json()})).then((function(e){return c({message:e.message})})).catch((function(e){return console.log("Error loading message from backend",e)}))},changeColor:function(e,n){var o=t().demo.map((function(t,c){return c===e&&(t.background=n),t}));c({demo:o})}}}},h=n(9),O=o.a.createContext(null),p=function(e){return function(t){var n=Object(c.useState)(d({getStore:function(){return s.store},getActions:function(){return s.actions},setStore:function(e){return a({store:Object.assign(s.store,e),actions:Object(u.a)({},s.actions)})}})),o=Object(r.a)(n,2),s=o[0],a=o[1];return Object(c.useEffect)((function(){s.actions.syncTokenFromSessionStore()}),[]),Object(h.jsx)(O.Provider,{value:s,children:Object(h.jsx)(e,Object(u.a)({},t))})}},g=function(e){e.notEntered;var t=e.setnotEntered,n=Object(c.useState)(""),o=Object(r.a)(n,2),s=o[0],a=o[1],i=Object(c.useState)(""),u=Object(r.a)(i,2),l=u[0],j=u[1],b=Object(c.useState)(""),d=Object(r.a)(b,2),p=d[0],g=d[1],f=Object(c.useState)(!1),m=Object(r.a)(f,2),x=m[0],v=m[1],S=Object(c.useState)(!1),k=Object(r.a)(S,2),y=k[0],N=k[1],C=Object(c.useContext)(O),E=(C.store,C.actions),w=(sessionStorage.token,function(e){e.preventDefault(),N(!y)});return Object(h.jsx)("div",{className:"cred-container",children:Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(s,l,p,x),E.signup(s,l,p).then((function(){console.log("SETING NOTENTERED TO FALSE"),t(!1)}))},children:[Object(h.jsx)("div",{className:"form-control",children:Object(h.jsx)("input",{type:"text",placeholder:"Name",value:s,onChange:function(e){return a(e.target.value)}})}),Object(h.jsx)("div",{className:"form-control",children:Object(h.jsx)("input",{type:"text",placeholder:"Email",value:l,onChange:function(e){return j(e.target.value)}})}),Object(h.jsxs)("div",{className:"form-control",children:[Object(h.jsx)("input",{type:y?"text":"password",placeholder:"Password",value:p,onChange:function(e){return g(e.target.value)}}),y?Object(h.jsx)("button",{type:"button",className:"show-password-btn",onClick:w,style:{background:"url('https://img.icons8.com/material-outlined/24/000000/closed-eye.png')"}}):Object(h.jsx)("button",{type:"button",className:"show-password-btn",onClick:w,style:{background:"url('https://img.icons8.com/material-outlined/24/000000/visible--v2.png')"}})]}),Object(h.jsxs)("div",{className:"form-control-check",children:[Object(h.jsx)("input",{type:"checkbox",checked:x,value:x,onChange:function(e){return v(e.currentTarget.checked)}}),Object(h.jsx)("label",{children:"Remember me"})]}),Object(h.jsx)("input",{type:"submit",value:"Sign up",className:"btn btn-block"})]})})},f=function(e){e.signIn;var t=e.setSignIn,n=Object(c.useContext)(O),o=n.store,s=n.actions,a=Object(c.useState)(""),u=Object(r.a)(a,2),l=u[0],j=u[1],b=Object(c.useState)(""),d=Object(r.a)(b,2),p=d[0],g=d[1],f=Object(c.useState)(!1),m=Object(r.a)(f,2),x=m[0],v=m[1],S=Object(c.useState)(!1),k=Object(r.a)(S,2),y=k[0],N=k[1],C=(sessionStorage.token,Object(i.g)()),E=function(e){e.preventDefault(),N(!y)};return o.token&&""!=o.token&&void 0!=o.token&&C.push("/mainpage"),Object(h.jsx)("div",{children:o.token&&""!=o.token&&void 0!=o.token?Object(h.jsx)(i.a,{to:"/mainpage"}):Object(h.jsxs)("div",{className:"signup-header",children:[Object(h.jsx)("script",{src:"https://kit.fontawesome.com/a076d05399.js",crossorigin:"anonymous"}),Object(h.jsx)("h1",{children:"Log in"}),Object(h.jsx)("div",{className:"cred-container",children:Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s.login(l,p).then((function(){t(!0)}))},children:[Object(h.jsx)("div",{className:"form-control",children:Object(h.jsx)("input",{type:"text",placeholder:"Email",value:l,onChange:function(e){return j(e.target.value)}})}),Object(h.jsxs)("div",{className:"form-control",children:[Object(h.jsx)("input",{type:y?"text":"password",placeholder:"Password",value:p,onChange:function(e){return g(e.target.value)}}),y?Object(h.jsx)("button",{type:"button",className:"show-password-btn",onClick:E,style:{background:"url('https://img.icons8.com/material-outlined/24/000000/closed-eye.png')"}}):Object(h.jsx)("button",{type:"button",className:"show-password-btn",onClick:E,style:{background:"url('https://img.icons8.com/material-outlined/24/000000/visible--v2.png')"}})]}),Object(h.jsxs)("div",{className:"form-control-check",children:[Object(h.jsx)("input",{type:"checkbox",checked:x,value:x,onChange:function(e){return v(e.currentTarget.checked)}}),Object(h.jsx)("label",{children:"Remember me"})]}),Object(h.jsx)("input",{type:"submit",value:"Sign in",className:"btn btn-block"})]})})]})})},m=function(e){e.onAdd;var t=e.setSignIn,n=Object(c.useState)(""),o=Object(r.a)(n,2),s=o[0],a=o[1],i=Object(c.useState)(""),u=Object(r.a)(i,2),l=u[0],j=u[1],b=Object(c.useState)(""),d=Object(r.a)(b,2),O=d[0],p=d[1],g=Object(c.useState)(""),f=Object(r.a)(g,2),m=f[0],x=f[1];return Object(h.jsxs)("form",{className:"add-friend-container",onSubmit:function(e){e.preventDefault();var n={friendName1:s,friendName2:l,friendName3:O,friendName4:m};console.log(n),fetch("".concat("http://localhost:5000","/addfriend"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){e.json(),t(!0)})).then((function(e){return console.log(e)}))},children:[Object(h.jsxs)("div",{className:"add-friend-form",children:[Object(h.jsx)("label",{children:"1."}),Object(h.jsx)("input",{type:"text",placeholder:"Add Friend",value:s,onChange:function(e){return a(e.target.value)}})]}),Object(h.jsxs)("div",{className:"add-friend-form",children:[Object(h.jsx)("label",{children:"2."}),Object(h.jsx)("input",{type:"text",placeholder:"Add Friend",value:l,onChange:function(e){return j(e.target.value)}})]}),Object(h.jsxs)("div",{className:"add-friend-form",children:[Object(h.jsx)("label",{children:"3."}),Object(h.jsx)("input",{type:"text",placeholder:"Add Friend",value:O,onChange:function(e){return p(e.target.value)}})]}),Object(h.jsxs)("div",{className:"add-friend-form",children:[Object(h.jsx)("label",{children:"4."}),Object(h.jsx)("input",{type:"text",placeholder:"Add Friend",value:m,onChange:function(e){return x(e.target.value)}})]}),Object(h.jsx)("input",{type:"submit",value:"Continue",className:"btn btn-block"})]})},x=function(e){console.log(e)},v=function(e){var t=e.signIn,n=e.setSignIn,o=Object(c.useState)(!0),s=Object(r.a)(o,2),a=s[0],i=s[1],u=Object(c.useState)(!1),l=Object(r.a)(u,2),j=l[0],b=l[1],d=Object(c.useContext)(O),p=d.store;d.actions;return Object(h.jsx)("div",{className:"login-container",children:p.token?Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{className:"add-friends-header",children:"Add a maximum of 4 people to your Covid-19 social bubble"}),Object(h.jsx)(m,{onAdd:x,setSignIn:n})]}):j?Object(h.jsx)(f,{signIn:t,setSignIn:n}):Object(h.jsxs)("div",{className:"signup-header",children:[Object(h.jsx)("h1",{children:"Create account"}),Object(h.jsx)("h2",{children:"Already have an account? "})," ",Object(h.jsx)("h2",{className:"link",onClick:function(){b(!0)},style:{cursor:"pointer"},children:"Sign in"}),Object(h.jsx)(g,{notEntered:a,setnotEntered:i})]})})},S=function(e){var t=e.signIn,n=e.setSignIn;return t?Object(h.jsx)(i.a,{to:"/mainpage"}):Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"loginBox",children:Object(h.jsx)(v,{signIn:t,setSignIn:n})})})},k=n(66),y=function(e){var t=e.setSignIn,n=e.signIn,o=Object(c.useContext)(O),s=o.store,a=o.actions,u=Object(c.useState)([]),l=Object(r.a)(u,2),j=l[0],b=l[1],d=Object(c.useState)([]),p=Object(r.a)(d,2),g=p[0],f=p[1],m=Object(c.useState)([]),x=Object(r.a)(m,2),v=x[0],S=x[1],y=Object(c.useState)(!1),N=Object(r.a)(y,2),C=N[0],E=N[1],w=Object(c.useState)(!1),I=Object(r.a)(w,2);I[0],I[1],Object(i.g)();return Object(c.useEffect)((function(){n&&a.getGraph(b,S,f).then((function(){E(!0)}))}),[]),Object(h.jsx)("div",{children:s.token?C?Object(h.jsxs)("div",{children:[Object(h.jsxs)("h1",{style:{textAlign:"center"},children:[v,"'s Social Bubble"]}),Object(h.jsx)("button",{className:"btn btn-block",onClick:function(){a.logout(),t(!1),i.a},children:" Sign Out "}),Object(h.jsx)(k.a,{graphData:{nodes:j,links:g},nodeId:"id",nodeColor:function(e){return 1===e.group?"#E6550D":2===e.group?"#FD8D3C":"#36A7F9"},nodeVal:function(e){return Math.pow(1===e.group?1.25:1.15,3)}})]}):Object(h.jsx)("div",{children:Object(h.jsx)("h1",{style:{textAlign:"center"},children:"Loading..."})}):Object(h.jsx)(i.a,{to:"/"})})},N=n(27);var C=p((function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],o=t[1];return Object(h.jsx)(N.a,{children:Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"content-wrapper",children:Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{exact:!0,path:"/",component:function(){return Object(h.jsx)(S,{signIn:n,setSignIn:o})}}),Object(h.jsx)(i.b,{exact:!0,path:"/mainpage",component:function(){return Object(h.jsx)(y,{setSignIn:o,signIn:n})}})]})})})})})),E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,165)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),s(e),a(e)}))};a.a.render(Object(h.jsx)(C,{}),document.getElementById("root")),E()},77:function(e,t,n){},78:function(e,t,n){}},[[150,1,2]]]);
//# sourceMappingURL=main.50b159d9.chunk.js.map